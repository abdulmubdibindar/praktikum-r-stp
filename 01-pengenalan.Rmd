# Modul-1: Pengolahan Data Terstruktur

Setelah mempelajari modul ini Anda diharapkan dapat:

1.  menganalisis variabel dan objek dalam sebuah format data terstruktur **`STP-1.3`**
2.  mengelola data terstruktur dengan tepat menggunakan perangkat komputer **`STP-1.4`**

## R

Selamat datang di dokumen R pertama Anda! Anda sekarang sedang menggunakan bahasa [R, bahasa pemrograman khusus analisis statistik](https://www.r-project.org/) yang saat ini banyak digunakan dan populer di kalangan *data analyst* dan *data engineers*.

Ibarat masakan dan resep. R itu berbasis teks/*character*, ibarat kalau memasak menuliskan resep. Jadi bisa ditiru. Sementara, *software* lain yang berbasis graphical seperti SPSS atau ArcGIS itu ibarat menceritakan saja, jadi tidak mudah ditiru. Istilah lainnya mempunyai reproduksibilitas.

## RStudio

Perangkat lunak yang sedang Anda gunakan bernama [**RStudio**](https://posit.co/downloads/), sebuah IDE *(integrated development environment)*, tempat Anda mengembangkan kode, menjalankan perintah, dan melihat hasil dari kode Anda.

Bayangkan RStudio seperti sebuah dapur yang sangat lengkap. Bahan-bahan makanan tersimpan di kulkas. Peralatan memasak seperti pisau, alas memotong, panci, semua tersusun pada raknya masing-masing. Untuk dapat memasak, Anda bisa menyuruh koki Anda untuk melakukannya. Tetapi, koki Anda itu hanya mengerti satu bahasa saja: bahasa R. Untuk itu, Anda harus bisa menguasai bahasa tersebut untuk memintanya membuat masakan yang Anda kehendaki.

Gambar \@ref(fig:rstudio-window) memberikan penjelasan singkat tentang tampilan jendela RStudio yang terdiri atas 4 panel.

```{r rstudio-window, fig.align='center', out.height='200px', out.width='auto', fig.cap='Pembagian Jendela RStudio', echo=FALSE}
knitr::include_graphics("images/jendela_rstudio.png")
```

1.  Panel *Environment* yang menampilkan daftar data atau variabel yang telah kita impor atau buat.
2.  Panel *Files, Plots, dan Help*, tempat kita melihat daftar *file* yang tersedia, grafik yang dihasilkan, dan menemukan dokumen bantuan untuk berbagai bagian dari R.
3.  Panel *Console*, digunakan untuk menjalankan kode.
4.  Panel *Script*, digunakan untuk menulis kode. Di sinilah kita akan menghabiskan sebagian besar waktu kerja kita.

## R Markdown

R Markdown adalah format *file* yang menggabungkan *script* R dan juga [Markdown](https://www.markdownguide.org/getting-started/). Singkatnya, Markdown adalah bahasa penulisan ringan yang digunakan untuk membuat teks lebih terstruktur tanpa perlu software rumit. Dengan Markdown, Anda bisa menambahkan judul, daftar, tautan, atau menebalkan teks hanya dengan simbol sederhana seperti \# atau \*. Bahasa ini sering dipakai untuk menulis dokumentasi, catatan, dan konten web karena mudah dibaca dalam bentuk asli maupun setelah diubah ke HTML.

Dengan menggunakan R Markdown, Anda bisa membuat *script* kode yang berisi keterangan penggunaannya dengan sejelas mungkin karena formatnya bisa bervariasi dan tidak sekaku *script* kode R biasa.

## Mulai Menggunakan R Markdown

Markdown memiliki "sintaks" (aturan penulisan) untuk memformat teks. Berikut ini dipaparkan sintaks-sintaks yang penting digunakan. Pelajarilah masing-masing sintaks di bawah untuk masing-masing keperluannya. Untuk sisanya, silakan pelajari sendiri di [tautan ini](https://rmarkdown.rstudio.com/authoring_basics.html).

### Tebal/Miring

``` markdown
*miring* atau _miring_

**tebal** atau __tebal__
```

*miring* atau *miring*

menghasilkan:

*miring* atau *miring*

**tebal** atau **tebal**

### Tajuk/*Heading*

Tajuk/*heading* ditulis dengan mememberikan tanda pagar sebelum judul tajuk. Tanda pagar 1 kali berarti kita menetapkan pada tingkat paling 1, tingkat paling tinggi. Antara tanda pagar dengan teks judul tajuk diberi satu spasi.

``` markdown
# Level 1

## Level 2

### Level 3, dan seterusnya hingga level 6
```


Daftar berurutan:

``` markdown
1. Item 1
2. Item 2
3. Item 3
    1. Item 3a (tekan 'Tab' terlebih dahulu sebanyak 2 kali)
    2. Item 3b
```

menghasilkan:

1.  Item 1
2.  Item 2
3.  Item 3
    1.  Item 3a
    2.  Item 3b

Mengetikkan angka '1' untuk setiap list menghasilkan daftar yang sama.

``` markdown
1. Item 1
1. Item 2
1. Item 3
    1. Item 3a
    1. Item 3b
```

menghasilkan:

1.  Item 1
2.  Item 2
3.  Item 3
    1.  Item 3a
    2.  Item 3b

Daftar tidak berurutan:

``` markdown
* Item 1
* Item 2
* Item 3
    + Item 3a
    + Item 3b
```

menghasilkan:

-   Item 1
-   Item 2
-   Item 3
    -   Item 3a
    -   Item 3b

### Gambar

``` markdown
![Gerbang Kampus ITERA](images/ITERA-2.jpg)
```

menghasilkan:

![Gerbang Kampus ITERA](images/ITERA-2.jpg)

*File* `ITERA-2.jpg` harus berada di satu folder yang sama dengan file R Markdown Anda. Jika tidak, Anda harus menuliskan *path* relatif berdasarkan posisi file markdown Anda di folder tersebut seperti yang tertulis di contoh. Nama dan ekstensi *file* harus sama persis.

### Tautan*/Hyperlink*

``` markdown
[Teks yang ditampilkan]("https://www.google.com/")
```

menghasilkan: [Teks yang ditampilkan](http://www.google.com/)

> âš ï¸**Penting**
>
> Tuliskan '<http://>' atau '<https://>' di awal dan '/' di akhir agar tautan dapat dibuka. Jangan lupa sertakan tanda petik dua di awal dan akhir tautan.

### *Code*

Code pada RStudio adalah perintah-perintah dalam bahasa pemrograman R yang ditulis dan dieksekusi di lingkungan RStudio untuk analisis dan visualisasi data, serta tugas-tugas lain.

``` markdown
`kode`
```

menghasilkan: `kode`

### *Code Chunk*

*Code chunk* adalah blok tulisan yang berisi *script* kode R. Cara menambahkannya bisa dengan dua cara:

-   dengan mengetikkan '/' di baris baru, kemudian memilih **R Code Chunk**, atau

-   menggunakan *hotkeys* `Ctrl` + `Alt` + `I` pada *keyboard.*

```{r}
# Ini adalah code block R yang siap dijalankan
```

## Dasar Pemrograman dalam R

Kita perlu memahami hal-hal dasar berikut dalam programming menggunakan R.

### Menjalankan perintah R

Perintah R bisa dijalankan dengan menekan `Ctrl` + `Enter` pada satu baris, atau `Ctrl` + `Shift` + `Enter` untuk menjalankan satu *chunk* sekaligus.

Coba jalankan baris berikut.

```{r}
# Jalankan baris ini saja
print("Weh, kita orang dah pakek R aja cuy!")

# Sekarang jalankan chunk ini secara keseluruhan
writeLines(c("Weh, kita orang dah pakek R aja cuy!","Iya lah! Yakali geh nggak.", "Ini ke bawah gak ya"))
```

> âš ï¸**Penting**
>
> Perintah di R dijalankan secara berurutan setiap barisnya. Oleh karena itu, urutan dalam penulisan perintah menjadi sangat penting. Ini disebut ***algoritma***.

### Variabel

Variabel adalah tempat menyimpan data dan informasi di R. Variabel terdiri atas nama variabel dan nilainya, Cara mendeklarasikan variabel adalah dengan operator `<-`. Operator deklarasi bisa dimasukkan dengan *hotkey* `Alt` + `I`.

Contoh:

```{r}
a <- 1 # 'a' adalah nama variabel yang nilainya 1
b <- 2 # 'b' adalah nama variabel yang nilainya 2
```

Variabel juga bisa dideklarasikan menggunakan operasi matematika dan variabel sebelumnya.

```{r}
hasil <- a + b

paste("Hasil:",hasil)
```

Untuk menampilkan nilai variabel tuliskan kembali nama variabelnya lalu jalankan.

```{r}
a
b
hasil
```

#### Vektor dan *Data Frame*

Variabel dapat berisi vektor dan *data frame*. Vektor adalah kumpulan nilai sejenis yang berbentuk 1 dimensi. Vektor dideklarasikan dengan fungsi `c(x1, x2, ...)` seperti berikut.

```{r}
usia <- c(28, 48, 47, 71, 22, 80, 48, 30, 31)

nilai <- c(20, 59, 2, 12, 22, 160, 34, 34, 29)

# menampilkan variabel-variabelnya
print(usia)
print(nilai)
```

*Data frame* adalah bentuk kumpulan nilai 2 dimensi seperti halnya tabel.

```{r}
ujian <- data.frame(usia, nilai)

ujian
```

#### Memberi Nama Variabel

Ada kaidah-kaidah dalam menuliskan nama variabel yang harus dipatuhi agar tidak error:

-   jangan menggunakan spasi
-   jangan mengawali nama variabel dengan angka
-   gunakan nama yang representatif dengan konteks data yang diolah
-   perhatikan betul kapitalisasi huruf. "`Nama`" dan "`nama`" dianggap sebagai dua variabel yang berbeda

```{r}
# Angka genap <- 2 # salah. Hapus '#' di awal lalu jalankan untuk mengecek
Angka_genap <- 2 # benar
angkaGenap <- 2 # benar
angka.genap <- 2 # benar

a <- c(30, 29, 25, 19) # tidak menggambarkan konteks data
usia_responden <- c(30, 29, 25, 19) # menggambarkan konteks data
```

#### Menghapus variabel

Jika kita ingin menghapus suatu variabel dari *environment* kita, gunakan fungsi `rm()`.

```{r}
rm(a) # menghapus variabel 'a'

#a  # akan menghasilkan pesan error bahwa variabel 'a' tidak ditemukan.
```

#### Mengganti nama variabel

R secara dasar tidak mempunyai perintah untuk mengganti nama variabel. Yang bisa kita lakukan hanya menghapus variabel lama dan membuat variabel baru dengan nama yang berbeda.

```{r}
b <- 2

# mengganti nama variabel 'b' menjadi 'z'
z <- 2
rm(b)
```

### *Comment*

*Comment* adalah baris yang menandakan komentar dari penulis *script*, Baris yang diberi komentar tidak akan dijalankan

Contoh:

```{r}
# Mendeklarasikan angka 1 sebagai 'a'
a <- 1

# Menjumlahkan 'a' dengan 2 kalinya
a + 2*a
# a - 2*a

# Menampilkan hasil
a
```

Komentar **sangat diperlukan** dalam penulisan *script* agar orang yang membaca *script* kita mudah memahaminya. Oleh karena itu, kemampuan komunikasi tekstual juga diperlukan dalam *coding*.

### Fungsi

Fungsi *(function)* adalah sekumpulan instruksi atau kode yang sudah dibuat sebelumnya, yang memberi tahu R untuk melakukan sesuatu. Format penulisan fungsi adalah:

``` r
nama_fungsi(nama_variabel)
```

Berikut adalah contoh fungsi untuk menghitung rata-rata sekumpulan nilai.

```{r}
a <- c(453.45, 293.95, 250.11, 194.13)

mean(a)
```

### Paket *(Packages)*

R memang sudah dilengkapi dengan banyak fungsi bawaan, tetapi tentu saja ia tidak bisa melakukan semua hal yang mungkin ingin Anda lakukan dengan data Anda. Di sinilah paket *(packages)* berperan.

Paket adalah kumpulan fungsi dan set data yang menambahkan fitur baru ke R. Misalnya:

-   Menerapkan uji statistik yang jarang digunakan
-   Menampilkan data di atas peta
-   Menjalankan kode C++ di dalam R
-   Mempercepat proses pengolahan data, dan masih banyak lagi

Ada paket R untuk semua itu. Bahkan, dengan lebih dari **17.000** paket yang tersedia, hampir semua hal yang bisa kita bayangkan sudah ada paketnya.

#### Instalasi Paket

Sebelum dapat menggunakan paket, kita harus terlebih dahulu menginstal paket tersebut. Instalasi paket ini sering kali membutuhkan koneksi internet seperti halnya kalian menginstal aplikasi dari Google Play Store atau App Store.

```{r}
# Jalankan chunk ini untuk menginstal paket-paket yang kita perlukan dalam pengolahan data di R
# Hapus tagar di depan 'install.packages' untuk menjalankannya
# install.packages("tidyverse") # <-- 'packages' ditulis menggunakan 's'
# install.packages("openxlsx")  # <-- nama paket yang ingin diinstal harus diapit tanda petik dua
```

#### Memuat Paket

Untuk menggunakan paket, kita harus memuat paket tersebut ke dalam lingkungan kerja *(environment)* kita terlebih dahulu.

```{r}
library(tidyverse)
library(openxlsx)
```

***Sekarang kita siap menggunakan R untuk mengolah data terstruktur kita.***

## Pengolahan Data Terstruktur

Kita akan mempelajari cara pengolahan data terstruktur atau *dataset*/set data dari hasil kuesioner kepada mahasiswa-mahasiswa Universitas Islam Negeri Raden Intan Lampung (UINRIL) dan Universitas Bandar Lampung (UBL) tentang pola perjalanan mereka.

Dalam R, pengolahan data terstruktur dipermudah dengan adanya paket `tidyverse`. Paket ini menyertakan paket-paket lain yang mempunyai kegunaan unik dalam pengolahan data terstruktur.

```{r}
library(tidyverse)
library(openxlsx)
```

Seperti yang kalian lihat, paket `tidyverse` menyertakan paket-paket berikut yang mempunyai kegunaan masing-masing:

-   `dplyr`: menyediakan serangkaian fungsi inti untuk memanipulasi dan mentransformasi data secara efisien.
-   `forcats`: memudahkan pekerjaan dengan data kategorikal atau yang dalam R disebut juga 'factors'.
-   `ggplot2`: untuk membuat grafik yang ciamik.
-   `lubridate`: mempermudah pekerjaan terkait format tanggal
-   `purrr`: meningkatkan kemampuan pemrograman fungsi dan vektor
-   `readr`: untuk membaca data tabular seperti `.csv`
-   `stringr`: menyederhanakan operasi teks/*string*
-   `tibble`: versi modern dari *data.frame* yang lebih rapi dan mudah digunakan.
-   `tidyr`: untuk merapikan data dengan mengubah format atau struktur tata letaknya.

Selain paket `tidyverse`, kita juga akan menggunakan paket `openxlsx` untuk mengoperasikan *file* Excel.

### Mengimpor set data *(dataset)* dari Excel

Untuk membuat set data di lingkungan kerja R kita, gunakan fungsi `read.xlsx()` seperti berikut. Fungsi `read.xlsx()` mempunyai atribut utama berupa *file path* lokasi file yang ditempatkan di dalam tanda kurung.

```{r}
# Memuat dataset dari file Excel "Data Gabungan.xlsx" yang terletak di folder yang sama dengan file R Markdown ini.
data <- read.xlsx("datasets/Data Praktikum 01.xlsx")

# Menampilkan dataset
data
```

Fungsi tersebut akan mengimpor seluruh isi dari file Excel "`Data Gabungan.xlsx`" pada *sheet* pertama saja.

Apabila kita ingin mengimpor set data dari *sheet* lainnya, kita harus menyertakan detil nama sheet yang kita ingin impor pada atribut "`sheet`".

*Dataset* yang kita impor akan menjadi objek dengan jenis *tibble*.

> âš ï¸**Penting**
>
> Jangan mengimpor data dari file Excel yang sedang terbuka karena akan menghasilkan pesan error.

```{r}
# Menyimpan file sebagai variabel tersendiri sehingga lebih fleksibel
file_dibaca <- "datasets/Data Praktikum 01.xlsx" # nama variabel bukan 'file' saja karena sudah ada fungsi R tersendiri dengan nama tersebut

# Mengimpor data dari file_dibaca dan menyimpannya sebagai variabel
data_ubl <- read.xlsx(file_dibaca, sheet = "DataUtama_mhsUBL")

# Melihat data tersebut
data_ubl
```

Kita juga dapat melihat *dataset* kita secara lengkap dengan perintah `View()`

```{r}
# Melihat set data UINRIL
View(data)

# Melihat set data UBL
View(data_ubl)
```

### Analisis data terstruktur pada set data

Kita sudah mempelajari bahwa data terstruktur terdiri atas **objek**, **variabel**, dan **nilai**. Satu objek diwakili oleh satu baris, variabel oleh kolom, dan nilai berada di dalam sel-sel yang merupakan perpotongan kolom dan baris.

> âš ï¸ **Penting**
>
> Di modul ini kita menggunakan istilah "variabel" untuk menyebut dua hal yang berbeda. Makna pertama mengacu pada penyimpan nilai di R, sementara yang kedua adalah elemen data terstruktur yang menjadi kolom-kolom.
>
> Dalam modul ini kita akan menggunakan istilah yang sama untuk kedua makna, jadi pahami konteks kalimatnya terlebih dahulu ketika menemukan kata ini.

Untuk mengetahui ringkasan struktur data, kita dapat menggunakan fungsi `glimpse()` yang membutuhkan set data yang kita simpan sebagai argumen.

```{r}
# ringkasan struktur data UIN RIL
glimpse(data)
```

Hasil dari fungsi `glimpse()` tersebut menunjukkan jumlah baris, jumlah kolom, dan kolom-kolom yang ada dalam set data kita beserta rinciannya. Set data kita memiliki 400 baris yang ditunjukkan oleh **`Rows`** dan 25 kolom yang ditunjukkan oleh **`Columns`** . Ini artinya, set data kita memiliki 400 objek dan 25 variabel.

Rincian nama-nama variabel ditunjukkan pada baris keluaran yang diawali oleh simbol **`\$`**. Singkatan-singkatan di dalam kurung sudut `<>` bermakna jenis nilai dari variabel tersebut. [Laman ini](https://cran.r-project.org/web/packages/tibble/vignettes/types.html) memberikan penjelasan makna setiap singkatan tersebut.

Terlihat dalam data kita bahwa hanya ada dua tipe nilai variabel: `dbl` dan `chr` yang berarti *double* (bilangan desimal) dan *character* (huruf/*string*).

### Mengolah set data

Dalam bagian ini kita akan mengolah set data kita yang bertujuan untuk memenuhi kebutuhan pengolahan data kita. Sebelum melakukan pengolahan, maka kita perlu menjawab pertanyaan terlebih dahulu "apa yang kita butuhkan untuk pengolahan data kita?"

Dalam praktikum ini kita sudah mengetahui bahwa terdapat dua jenis set data hasil kuesioner, yakni set data mahasiswa Universitas Islam Negeri Raden Intan Lampung (UINRIL) dan juga Universitas Bandar Lampung (UBL). Kedua jenis set data tersebut disimpan dalam variabel yang berbeda. Kita butuh untuk *menggabungkan kedua set data* tersebut menjadi satu set data yang mencakup kedua kampus agar nanti kita bisa melakukan analisis dengan lebih leluasa.

Pengolahan set data seperti ini punya istilah yang keren: ***data wrangling*** (bisa dibaca "data rengling")

#### Merancang Algoritma (Urutan kerja)

Karena R adalah program yang mayoritasnya *character user interface* (CUI) alih-alih *graphical user interface*, maka pekerjaan kita tidak bisa seleluasa GUI yang dapat kita bolak-balik urutannya. Kita sebaiknya memiliki "rencana kerja" yang jelas, yang dalam bahasa pemrograman disebut **algoritma**.

Algoritma yang akan kita lakukan dalam praktikum ini adalah sebagai berikut:

1.  Mengidentifikasi nama-nama kolom di set data UIN RIL
2.  Mengidentifikasi nama-nama kolom di set data UBL
3.  Menentukan kolom-kolom yang akan diambil di set data baru
4.  Menyeleksi kolom-kolom yang akan dipakai di set data UIN RIL dan UBL,
5.  Mengubah nama kolom-kolom di kedua set data menjadi nama-nama yang sudah ditentukan di langkah-3.
6.  Menyatukan kedua set data.

> ğŸ’¡ **Tip**
>
> Sebisa mungkin rancang setiap langkah pada urutan kerja kita dengan rinci agar kita dapat menerjemahkan langkah-langkah tersebut dengan lebih mudah ke baris kode.

#### Mengidentifikasi Nama-nama Kolom

Untuk mengidentifikasi nama-nama kolom kita dapat menggunakan fungsi `colnames()` yang mengambil argumen nama set data.

```{r}
# data UIN RIL
colnames(data)
```

```{r}
# data UIN RIL
colnames(data_ubl)
```

Kita dapat mengetahui jumlah kolom setiap set data secara langsung dengan fungsi `length()`.

```{r}
length(colnames(data)) # jumlah kolom set data UIN RIL
length(colnames(data_ubl)) # jumlah kolom set data UBL
```

> âš ï¸ Penting!
>
> Fungsi `length()` pada dasarnya adalah fungsi penghitung jumlah elemen dalam suatu vektor atau jenis data lain yang berupa daftar.

```{r}
# Mendefinisikan suatu vektor
suatu_vektor <- c(1, 2, 3, 4, 5)

# Mengukur panjangnya
length(suatu_vektor)
```

Dari kedua fungsi tersebut, kita dapat mengetahui bahwa terdapat perbedaan jumlah kolom dan juga perbedaan penamaan:

-   `kepemilikan.sepedan` di data UIN vs `kepemilikan.sepeda` di data UBL.

-   `biaya.dalam.ribu2` di data UIN vs `biaya.dalam.seminggu` di data UBL.

Perbedaan-perbedaan inilah yang membuat kita tidak bisa langsung menggabungkan data. Kita harus menyeragamkannya terlebih dahulu,

#### Menentukan Kolom-kolom yang Akan Diambil di Set Data Baru

Setelah mengidentifikasi nama-nama variabel dan jumlahnya, kita putuskan untuk mengambil variabel-variabel berikut: (1) `Nomor.urut`, (2) `Jenis.Kelamin`, (3) `Umur`, (4) `Fakultas`, (5) `Prodi`, (6) `Tingkat.Semester`, (7) `Uang.Saku`, (8) `kepemilikan.mobil`, (9) `kepemilikan.motor`, (10) `kepemilikan.sepeda`, (11) `kendaraan.utama`, (12) `jenis.tempat.tinggal`, (13) `jarak`, (14) `biaya.dalam.seminggu`, (15) `Jumlah.perjalanan.Senin`, (16) `Jumlah.perjalanan.Selasa`, (17) `Jumlah.perjalanan.Rabu`, (18) `Jumlah.perjalanan.Kamis`, (19) `Jumlah.perjalanan.Jumat`, (20) `Jumlah.perjalanan.Sabtu`, (21) `Jumlah.perjalanan.Ahad`.

Kita akan menyimpan nama-nama kolom yang sudah kita tentukan tersebut menjadi sebuah vektor.

```{r}
# Membuat vektor berisi nama-nama kolom final yang kita inginkan
kolom_final <- c(
  "Nomor.urut", "Jenis.Kelamin", "Umur", "Fakultas", "Prodi", 
  "Tingkat.Semester", "Uang.Saku",
  "kepemilikan.mobil", 
  "kepemilikan.motor", "kepemilikan.sepeda", "kendaraan.utama", 
  "jenis.tempat.tinggal", "jarak", "biaya.dalam.sepekan", 
  "Jumlah.perjalanan.Senin", "Jumlah.perjalanan.Selasa", 
  "Jumlah.perjalanan.Rabu", "Jumlah.perjalanan.Kamis", 
  "Jumlah.perjalanan.Jumat", "Jumlah.perjalanan.Sabtu", 
  "Jumlah.perjalanan.Ahad"
)
```

#### Menyeleksi Kolom-kolom Yang Akan Dipakai

Kita akan menggunakan fungsi `select()` dari `dplyr` (bagian dari `tidyverse`) untuk memilih hanya kolom-kolom yang relevan dari masing-masing set data. Perhatikan baik-baik, kita harus menggunakan **nama kolom asli** saat menyeleksi.

```{r}
# 4. Menyeleksi kolom dari data UIN RIL
data_uin_selected <- select(data,
  Nomor.urut, Jenis.Kelamin, Umur, Fakultas, Prodi, Tingkat.Semester,
  Uang.Saku, 
  kepemilikan.mobil, kepemilikan.motor, 
  kepemilikan.sepedan, # Ingat, nama aslinya pakai 'n'
  kendaraan.utama, jenis.tempat.tinggal, 
  `jarak.(km)`, # Gunakan backtick (`) karena ada karakter spesial, yakni tanda kurung.
  `biaya.dalam.ribu2`,
  Jumlah.Perjalanan.Senin, Jumlah.Perjalanan.Selasa, Jumlah.Perjalanan.Rabu,
  Jumlah.Perjalanan.Kamis, Jumlah.Perjalanan.Jumat, Jumlah.Perjalanan.Sabtu,
  Jumlah.Perjalanan.Ahad
)
```

```{r}
# 5. Menyeleksi kolom dari data UBL
data_ubl_selected <- select(data_ubl,
  Nomor.urut, Jenis.Kelamin, Umur, Fakultas, Prodi, Tingkat.Semester,
  Uang.Saku,
  kepemilikan.mobil, kepemilikan.motor, 
  kepemilikan.sepeda, # Di sini namanya sudah benar
  kendaraan.utama, jenis.tempat.tinggal,
  `jarak.(km)`,
  biaya.dalam.seminggu,
  Jumlah.perjalanan.Senin, Jumlah.Perjalanan.Selasa, Jumlah.Perjalanan.Rabu,
  Jumlah.Perjalanan.Kamis, Jumlah.Perjalanan.Jumat, Jumlah.Perjalanan.Sabtu,
  Jumlah.Perjalanan.Ahad
)
```

Sekarang kita punya dua *data frame* baru (`data_uin_selected` dan `data_ubl_selected`) yang isinya hanya kolom-kolom yang kita butuhkan.

#### Mengubah Nama Kolom Menjadi Nama Standar

Ini adalah langkah kuncinya. Kita cukup menimpa nama-nama kolom di kedua *data frame* yang sudah kita seleksi tadi dengan nama-nama kolom dari vektor `kolom_final` yang kita buat di 3.3.3.

```{r}
# Mengganti nama kolom di kedua data frame
colnames(data_uin_selected) <- kolom_final
colnames(data_ubl_selected) <- kolom_final
```

Untuk membuktikan bahwa namanya sudah berubah, kita bisa cek lagi.

```{r}
# Cek nama kolom setelah diubah
colnames(data_uin_selected)
print("============================================================")
colnames(data_ubl_selected)
```

Hasil dari kedua perintah di atas seharusnya adalah daftar nama yang identik.

#### Menyatukan Kedua Set Data

Ini adalah langkah terakhir kita. Karena kedua set data kini memiliki struktur kolom yang sama persis, kita bisa menyatukannya menjadi satu *data frame* besar dengan fungsi `bind_rows()`.

```{r, eval = FALSE}
# Menggabungkan kedua data frame menjadi satu
data_gabungan <- bind_rows(data_uin_selected, data_ubl_selected)
```

Hasil dari penggabungan tersebut menyebabkan *error* pada kolom `biaya.dalam.sepekan` . Ini disebabkan oleh biaya.dalam.sepekan dalam set data UINRIL (`data`) berbeda jenisnya dengan set data UBL (`data_ubl`). Begitu pula `Jumlah.perjalanan.Senin`

```{r}
# Mengecek tipe data dalam set data UINRIL
glimpse(data_uin_selected)

print("=================================================================================")

# Mengecek tipe data dalam set data UBL
glimpse(data_ubl_selected)
```

Ini adalah kasus yang tepat untuk menggambarkan bahwa dalam data terstruktur, jenis nilai harus sama persis. Untuk kesederhanaan praktikum, kita akan melewati dulu variabel `biaya.dalam.sepekan` dan `Jumlah.perjalanan.Senin` tersebut.

#### Memperbaiki Set Data yang Akan Digabungkan

Kita akan menghapus `biaya.dalam.sepekan` dari kedua set data kita. Untuk menghapus suatu kolom, kita dapat menggunakan fungsi `select()` juga, akan tetapi kita tambahkan tanda negatif (`-`) di depan nama variabelnya.

```{r}
# 'Menimpa' data_uin_selected dengan data_uin_selected yang variabel biaya.dalam.sepekan sudah dihapus
data_uin_selected <- select(data_uin_selected, 
                            -`biaya.dalam.sepekan`, -`Jumlah.perjalanan.Senin`)

# Melihat hasilnya
glimpse(data_uin_selected)
colnames(data_uin_selected)
```

```{r}
# 'Menimpa' data_ubl_selected dengan data_ubl_selected yang variabel biaya.dalam.sepekan sudah dihapus
data_ubl_selected <- select(data_ubl_selected, 
                            -`biaya.dalam.sepekan`, -`Jumlah.perjalanan.Senin`)

# Melihat hasilnya
glimpse(data_ubl_selected)
```

#### Menyatukan Kedua Set Data Setelah Diperbaiki

Kita akan coba menggabungkan kedua set data tadi.

```{r}
# Menggabungkan kedua data frame menjadi satu
data_gabungan <- bind_rows(data_uin_selected, data_ubl_selected)
```

Selesai! ğŸ¥³ Mari kita lihat hasil akhir dari kerja keras kita dengan `glimpse()`. Hasil akan menunjukkan bahwa kita mempunyai 779 objek yang merupakan gabungan responden mahasiswa UIN RIL dan UBL.

```{r}
# Tampilkan struktur data gabungan yang sudah rapi
glimpse(data_gabungan)
```

#### Mengekspor Set Data Hasil Pengolahan ke Fail *(File)* Terpisah

Dalam dunia data sains dikenal jenis fail `.csv` yang merupakan singkatan dari *"comma-separated values."* Fail ini menyimpan nilai-nilai sehingga dapat dibaca sebagai tabel seperti contoh berikut:

```         
Nama; umur
Ifna; 20
Salbina; 21
```

Hasilnya adalah:

| Nama    | umur |
| ------- | ---- |
| Ifna    | 20   |
| Salbina | 21   |

Kita dapat mengekspor set data hasil pengolahan menjadi fail dengan format data terstruktur seperti `.csv` atau Excel (`.xls`, `.xlsx`) dengan fungsi `write.csv2()` atau `write.xlsx()`.

Format perintah fungsi-fungsi ini adalah:

``` r
write.csv2(variabel_dataset, "nama_file_ekspor.csv")

write.xlsx(variabel_dataset, "nama_file_ekspor.xlsx")
```

Seluruh fail yang diekspor lokasi direktorinya **sama seperti lokasi file .Rproj** kita.

##### Mengekspor set data ke fail `.csv`

Terdapat dua jenis fungsi untuk mengekspor set data ke fail `.csv`: `write.csv()` dan `write.csv2()`. Perbedaan antara keduanya adalah **pemisah nilainya**.

Fungsi `write.csv()` digunakan untuk set data yang menggunakan **tanda titik** sebagai pemisah desimal, sehingga pemisahnya adalah **tanda koma (,)**. Ini adalah format yang biasa dipakai di Amerika Utara.

Sementara itu, `write.csv2()` menggunakan pemisah **titik-koma (;)** *(semicolon)*. Ini digunakan untuk set data yang pemisah desimalnya adalah **tanda koma**.

```{r}
# Mengekspor data_gabungan dalam format csv
write.csv2(data_gabungan, "Data UINRIL & UBL.csv")
```

##### Mengekspor set data ke fail `.xlsx`

Sama seperti write.csv2(), fungsi write.xlsx() juga mengikuti format yang sama.

```{r}
write.xlsx(data_gabungan, "Data UINRIL & UBL.xlsx")
```

## Soal Latihan

1.  Dari fail *(file)* "`Data Praktikum 01.xlsx`" terdapat dua *sheet* lagi yang merupakan hasil kuesioner mahasiswa ITERA dan UNILA. Untuk hasil kuesioner mahasiswa ITERA terletak pada *sheet* bernama `DataUtama_mhsITERA` dan hasil kuesioner mahasiswa UNILA pada `DataUtama_mhsUNILA`. Tentukan sebanyak mungkin kolom yang bisa digabungkan, yakni yang tipenya sama. Gabungkan dua set data tersebut seperti yang sudah kalian pelajari dan simpan menjadi fail dengan nama **`Prak1_[NIM1]_[NIM2].xlsx`**. **`STP-1.4`**.

2.  Berapa variabel objek yang kalian hasilkan dalam data gabungan? Tunjukkan beserta buktinya **`STP-1.3`**.

------------------------------------------------------------------------



